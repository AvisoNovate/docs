<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><link href="css/default.css" rel="stylesheet" type="text/css" /><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>io.aviso.columns documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Pretty</span> <span class="project-version">0.1.25</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>io</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>aviso</span></div></div></li><li class="depth-3 branch"><a href="io.aviso.ansi.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ansi</span></div></a></li><li class="depth-3 branch"><a href="io.aviso.binary.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>binary</span></div></a></li><li class="depth-3 branch current"><a href="io.aviso.columns.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>columns</span></div></a></li><li class="depth-3 branch"><a href="io.aviso.exception.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>exception</span></div></a></li><li class="depth-3 branch"><a href="io.aviso.logging.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>logging</span></div></a></li><li class="depth-3 branch"><a href="io.aviso.repl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>repl</span></div></a></li><li class="depth-3"><a href="io.aviso.writer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>writer</span></div></a></li><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree" style="top: -269px;"><span class="top" style="height: 278px;"></span><span class="bottom"></span></span><span>pretty</span></div></div></li><li class="depth-2"><a href="pretty.plugin.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>plugin</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="io.aviso.columns.html#var-format-columns"><div class="inner"><span>format-columns</span></div></a></li><li class="depth-1"><a href="io.aviso.columns.html#var-max-length"><div class="inner"><span>max-length</span></div></a></li><li class="depth-1"><a href="io.aviso.columns.html#var-max-value-length"><div class="inner"><span>max-value-length</span></div></a></li><li class="depth-1"><a href="io.aviso.columns.html#var-write-rows"><div class="inner"><span>write-rows</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">io.aviso.columns</h1><div class="doc"><div class="markdown"><p>Assistance for formatting data into columns. Each column has a width, and data within the column may be left or right justified. Generally, columns are sized to the largest item in the column. When a value is provided in a column, it may be associated with an explicit width which is helpful when the value contains non-printing characters (such as those defined in the <code>io.aviso.ansi</code> namespace).</p></div></div><div class="public anchor" id="var-format-columns"><h3>format-columns</h3><div class="usage"><code>(format-columns &amp; column-defs)</code></div><div class="doc"><div class="markdown"><p>Converts a number of column definitions into a formatting function. Each column definition may be:</p>
<ul>
  <li>a string, to indicate a non-consuming column that outputs a fixed value. This is often just a space character or two, to seperate columns.</li>
  <li>a number, to indicate a consuming column that outputs a left justified value of the given width.</li>
  <li>a vector containing a keyword and a number; the number is the width, the keyword is the justification.</li>
  <li>:none, to indicate a consuming column with no explicit width</li>
  <li>nil, which is treated like an empty string</li>
</ul>
<p>With explicit justification, the keyword may be :left, :right, or :none.</p>
<dl>
  <dt>:left
  </dt>
  <dd>Pads the column with spaces after the value. Truncates long values from the right, displaying  initial character and discarding trailing characters.</dd>
  <dt>:right
  </dt>
  <dd>Pads the column with spaces before the value. Truncates long values from the left.</dd>
  <dt>:none
  </dt>
  <dd>Does not pad with spaces at all, and should only be used in the final column.</dd>
</dl>
<p>Generally speaking, truncation does not occur because columns are sized to fit their contents.</p>
<p>A column width is required for <code>:left</code> or <code>:right</code>. Column width is optional and ignored for <code>:none</code>.</p>
<p>Values are normally string, but any type is accepted and will be converted to a string. This code is aware of ANSI codes and ignores them to calculate the length of a value for formatting and identation purposes.</p>
<p>There will likely be problems if a long string with ANSI codes is truncated, however.</p>
<p>The returned function accepts a <a href="io.aviso.writer.html#var-StringWriter">StringWriter</a> and the column values and writes each column value, with appropriate padding, to the <a href="io.aviso.writer.html#var-StringWriter">StringWriter</a>.</p>
<p>Example:</p>
<pre><code>(let [formatter (format-columns [:right 20] ": " [:right 20] ": " :none)]
  (write-rows *out* formatter [:last-name :first-name :age] customers))
</code></pre></div></div><div class="src-link"><a href="https://github.com/AvisoNovate/pretty/blob/master/src/io/aviso/columns.clj#L85">view source</a></div></div><div class="public anchor" id="var-max-length"><h3>max-length</h3><div class="usage"><code>(max-length coll)</code></div><div class="doc"><div class="markdown"><p>Find the maximum length of the strings in the collection, based on their visual length (that is, omitting ANSI escape codes).</p></div></div><div class="src-link"><a href="https://github.com/AvisoNovate/pretty/blob/master/src/io/aviso/columns.clj#L137">view source</a></div></div><div class="public anchor" id="var-max-value-length"><h3>max-value-length</h3><div class="usage"><code>(max-value-length coll key)</code></div><div class="doc"><div class="markdown"><p>A convinience for computing the maximum length of one string property from a collection of values.</p>
<dl>
  <dt>coll</dt>
  <dd>collection of values</dd>
  <dt>key</dt>
  <dd>key that is passed one value and returns the property, typically a keyword when the values are maps</dd>
</dl></div></div><div class="src-link"><a href="https://github.com/AvisoNovate/pretty/blob/master/src/io/aviso/columns.clj#L145">view source</a></div></div><div class="public anchor" id="var-write-rows"><h3>write-rows</h3><div class="usage"><code>(write-rows writer column-formatter extractors row-data)</code><code>(write-rows writer extended-columns-defs row-data)</code></div><div class="doc"><div class="markdown"><p>A convienience for writing rows of columns using a prepared column formatter.</p>
<p>In the 3-arity version of the function, the extended-column-defs is used to automatically compute the column-formatter and extractors.</p>
<p>Extended column definitions are like the column definitions used with <a href="io.aviso.columns.html#var-format-columns">format-columns</a> except:</p>
<ul>
  <li>The first value in each vector is the extractor (a function or keyword)</li>
  <li>If the column layout is :left or :right, then the width of the column is computed  as the <a href="io.aviso.columns.html#var-max-value-length">max-value-length</a> of that column (using the extractor and the row-data).</li>
  <li>An extended column definition may not be a vector, but instead:
    <ul>
      <li>A string, which is treated as literal text</li>
      <li>nil, which is ignored</li>
      <li>otherwise, assumed to be an extractor whose values will be right justified</li>
    </ul>
  </li>
</ul>
<dl>
  <dt>writer</dt>
  <dd><a href="io.aviso.writer.html#var-StringWriter">StringWriter</a> target of output</dd>
  <dt>extended-column-defs
  </dt>
  <dd>used to compute column-formatter and extractors taking into account row-data</dd>
  <dt>column-formatter
  </dt>
  <dd>formatter function created by format-columns</dd>
  <dt>extractors</dt>
  <dd>seq of functions that extract a column value from a row; typically a keyword when the row is a map</dd>
  <dt>row-data
  </dt>
  <dd>a seq of row data</dd>
</dl>
<p>Example:</p>
<pre><code>(write-rows *out*
            [:last-name ", " :first-name ": " [:age :none]]
            customers)
</code></pre>
<p>This will write three columns, seperated by literal text. The first column will be right justified, and as wide as longest last name. The second column will also be right justified, and as wide as the longest first name. The final column will not be justified at all, so it will be varying width.</p></div></div><div class="src-link"><a href="https://github.com/AvisoNovate/pretty/blob/master/src/io/aviso/columns.clj#L201">view source</a></div></div></div></body></html>