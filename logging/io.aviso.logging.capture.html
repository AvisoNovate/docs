<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>io.aviso.logging.capture documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Logging</span> <span class="project-version">0.3.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>io</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>aviso</span></div></div></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>logging</span></div></div></li><li class="depth-4 branch current"><a href="io.aviso.logging.capture.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>capture</span></div></a></li><li class="depth-4 branch"><a href="io.aviso.logging.correlation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>correlation</span></div></a></li><li class="depth-4 branch"><a href="io.aviso.logging.mdc.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mdc</span></div></a></li><li class="depth-4"><a href="io.aviso.logging.setup.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>setup</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="io.aviso.logging.capture.html#var-clear-logged-events"><div class="inner"><span>clear-logged-events</span></div></a></li><li class="depth-1"><a href="io.aviso.logging.capture.html#var-logged-events"><div class="inner"><span>logged-events</span></div></a></li><li class="depth-1"><a href="io.aviso.logging.capture.html#var-logged-events-fixture"><div class="inner"><span>logged-events-fixture</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">io.aviso.logging.capture</h1><h4 class="added">added in 0.3.0</h4><div class="doc"><div class="markdown"><p>Capture logged events for in-process debugging and testing.</p></div></div><div class="public anchor" id="var-clear-logged-events"><h3>clear-logged-events</h3><div class="usage"><code>(clear-logged-events)</code></div><div class="doc"><div class="markdown"><p>Clears any captured log events.</p></div></div><div class="src-link"><a href="https://github.com/AvisoNovate/logging/blob/master/src/io/aviso/logging/capture.clj#L23">view source</a></div></div><div class="public anchor" id="var-logged-events"><h3>logged-events</h3><div class="usage"><code>(logged-events)</code></div><div class="doc"><div class="markdown"><p>Returns a snapshot, as a vector, of all events logged since the last clear of the log (the start of the current test).</p>
<p>Event maps have the following keys:</p>
<dl>
  <dt>:level
  </dt>
  <dd>:trace, :debug, etc.</dd>
  <dt>:logger
  </dt>
  <dd>The name of the logger, as a keyword</dd>
  <dt>:data
  </dt>
  <dd>A map of the data parsed as EDN from the event message. If the EDN data canâ€™t be parsed,  then this will be a map of <code>:message</code> and the message string.</dd>
  <dt>:timestamp
  </dt>
  <dd>System time (milliseconds since epoch) of the event.</dd>
  <dt>:thread-name
  </dt>
  <dd>Name of thread on which the event was logged.</dd>
  <dt>:ex
  </dt>
  <dd>The exception associated with the event. This is a map with keys :message and :class-name,  and optionally :cause.</dd>
</dl>
<p>Returns a lazy seq of events. However, note that the seq is based on a mutable list that will be unstable if further logging takes place.</p></div></div><div class="src-link"><a href="https://github.com/AvisoNovate/logging/blob/master/src/io/aviso/logging/capture.clj#L37">view source</a></div></div><div class="public anchor" id="var-logged-events-fixture"><h3>logged-events-fixture</h3><div class="usage"><code>(logged-events-fixture f)</code></div><div class="doc"><div class="markdown"><p>Using the expected logback configuration, installs an appender that captures logged EDN data into the *log-data atom.</p>
<p>The appender is removed at the end of the test BUT the captured log data is kept until the start of the next test.</p>
	    <p>NOTE: When using <code>io.aviso.logging/install-pretty-logging</code>, the <code>:ex</code> data will always be nil (<code>install-pretty-logging</code> overrides the message with a pretty-formatted exception, which results in the exception data seen by the appender being nil.</p></div></div><div class="src-link"><a href="https://github.com/AvisoNovate/logging/blob/master/src/io/aviso/logging/capture.clj#L90">view source</a></div></div></div></body></html>

